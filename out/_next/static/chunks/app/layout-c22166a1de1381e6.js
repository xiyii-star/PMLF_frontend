(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var i=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,i.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,...h},x)=>(0,i.createElement)("svg",{ref:x,...r,width:l,height:l,stroke:s,strokeWidth:c?24*Number(n)/Number(l):n,className:["lucide",`lucide-${a(e)}`,d].join(" "),...h},[...t.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},9865:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7480:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1392:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},9081:function(e,t,s){Promise.resolve().then(s.bind(s,7947)),Promise.resolve().then(s.t.bind(s,6087,23)),Promise.resolve().then(s.t.bind(s,2445,23))},8659:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(7437),r=s(2265);function a(){let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let t;let s=e.current;if(!s)return;let i=s.getContext("2d");if(!i)return;let r=()=>{s.width=window.innerWidth,s.height=window.innerHeight};r(),window.addEventListener("resize",r);class a{update(e,t){this.x+=this.speedX,this.y+=this.speedY,this.x>e&&(this.x=0),this.x<0&&(this.x=e),this.y>t&&(this.y=0),this.y<0&&(this.y=t)}draw(){i&&(i.fillStyle="rgba(".concat(this.color,", ").concat(this.opacity,")"),i.beginPath(),i.arc(this.x,this.y,this.size,0,2*Math.PI),i.fill())}constructor(e,t){this.x=Math.random()*e,this.y=Math.random()*t,this.size=3*Math.random()+1,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.opacity=.5*Math.random()+.2;let s=["99, 102, 241","139, 92, 246","59, 130, 246","168, 85, 247"];this.color=s[Math.floor(Math.random()*s.length)]}}let l=[];for(let e=0;e<100;e++)l.push(new a(s.width,s.height));let n=e=>{if(!i)return;let t=.02*e%50;i.strokeStyle="rgba(99, 102, 241, 0.1)",i.lineWidth=1;for(let e=0;e<s.width;e+=50)i.beginPath(),i.moveTo(e,0),i.lineTo(e,s.height),i.stroke();for(let e=-50;e<s.height;e+=50)i.beginPath(),i.moveTo(0,e+t),i.lineTo(s.width,e+t),i.stroke()},c=e=>{i&&[{x:.2,y:.3,size:300,color:"99, 102, 241"},{x:.8,y:.7,size:400,color:"139, 92, 246"},{x:.5,y:.5,size:350,color:"59, 130, 246"}].forEach((t,r)=>{let a=s.width*t.x+100*Math.sin(.001*e+r),l=s.height*t.y+100*Math.cos(.001*e+r),n=i.createRadialGradient(a,l,0,a,l,t.size);n.addColorStop(0,"rgba(".concat(t.color,", 0.15)")),n.addColorStop(.5,"rgba(".concat(t.color,", 0.05)")),n.addColorStop(1,"rgba(".concat(t.color,", 0)")),i.fillStyle=n,i.fillRect(0,0,s.width,s.height)})},d=()=>{if(i)for(let e=0;e<l.length;e++)for(let t=e+1;t<l.length;t++){let s=l[e].x-l[t].x,r=l[e].y-l[t].y,a=Math.sqrt(s*s+r*r);a<150&&(i.strokeStyle="rgba(99, 102, 241, ".concat(.2*(1-a/150),")"),i.lineWidth=1,i.beginPath(),i.moveTo(l[e].x,l[e].y),i.lineTo(l[t].x,l[t].y),i.stroke())}},o=Date.now(),h=()=>{let e=Date.now()-o;i.fillStyle="rgba(15, 23, 42, 1)",i.fillRect(0,0,s.width,s.height),n(e),c(e),l.forEach(e=>{e.update(s.width,s.height),e.draw()}),d(),t=requestAnimationFrame(h)};return h(),()=>{window.removeEventListener("resize",r),cancelAnimationFrame(t)}},[]),(0,i.jsx)("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"linear-gradient(to bottom, #0f172a, #1e1b4b)"}})}},7947:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var i=s(7437),r=s(2265),a=s(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var n=s(6264);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),d=(0,a.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),o=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var h=s(826),x=s(8659);let m=[{id:"phase1",name:"论文搜索",description:"搜索和筛选相关论文"},{id:"phase2",name:"PDF下载",description:"下载论文PDF文件"},{id:"phase3",name:"论文分析",description:"DeepPaper多智能体分析"},{id:"phase4",name:"引用类型",description:"推断引用关系类型"},{id:"phase5",name:"图谱构建",description:"构建知识图谱"},{id:"phase6",name:"深度调研",description:"生成调研报告"},{id:"phase7",name:"研究想法",description:"生成研究想法"},{id:"phase8",name:"结果输出",description:"保存和可视化结果"}];function u(e){let{taskId:t}=e,[s,a]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)("websocket"),w=(0,r.useRef)(null),j=(0,r.useRef)(null),y=(0,r.useRef)(null),N=(0,r.useRef)(0),k=(0,r.useRef)(!0);(0,r.useEffect)(()=>{if(!t)return;let e=()=>{N.current=window.scrollY};_(),S();let s=setInterval(()=>{e(),_()},2e3),i=setTimeout(()=>{g||"websocket"!==v||(console.log("WebSocket connection timeout, falling back to polling"),Z())},5e3);return setTimeout(()=>{k.current=!1},1e3),()=>{clearInterval(s),clearTimeout(i),w.current&&w.current.close(),y.current&&clearInterval(y.current)}},[t]),(0,r.useEffect)(()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[u]),(0,r.useEffect)(()=>{(null==s?void 0:s.status)==="completed"&&setTimeout(()=>{window.location.hash="#/results/".concat(t)},2e3)},[null==s?void 0:s.status,t]);let _=async()=>{try{let e=N.current,s=await h.x.getTaskStatus(t);a(s),!k.current&&e>0&&requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"auto"})})}catch(e){console.error("Failed to load status:",e)}},S=()=>{try{let e=h.x.getWebSocketUrl(t),s=new WebSocket(e);s.onopen=()=>{f(!0),b("websocket"),w.current=s},s.onmessage=e=>{let t=JSON.parse(e.data);p(e=>[...e,t])},s.onerror=e=>{console.error("WebSocket error:",e),f(!1)},s.onclose=()=>{f(!1),"websocket"===v&&setTimeout(S,3e3)}}catch(e){console.error("Failed to connect WebSocket:",e)}},Z=()=>{console.log("Starting polling mode for logs"),b("polling"),y.current&&clearInterval(y.current),y.current=setInterval(async()=>{try{let e=await fetch("/api/pipeline/logs/".concat(t));if(e.ok){let t=await e.json();t.logs&&Array.isArray(t.logs)&&p(t.logs)}}catch(e){console.error("Failed to poll logs:",e)}},2e3)},z=e=>{if(!s)return"pending";let t=s.progress[e];return t&&t.status||"pending"},T=e=>{switch(z(e)){case"completed":return(0,i.jsx)(l,{className:"w-6 h-6 text-green-500"});case"running":return(0,i.jsx)(n.Z,{className:"w-6 h-6 text-blue-500 animate-spin"});case"failed":return(0,i.jsx)(c,{className:"w-6 h-6 text-red-500"});default:return(0,i.jsx)(d,{className:"w-6 h-6 text-gray-300"})}};return s?(0,i.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,i.jsx)(x.Z,{}),(0,i.jsx)("div",{className:"relative bg-white/10 backdrop-blur-md border-b border-white/20 shadow-lg",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("a",{href:"/",className:"text-indigo-200 hover:text-white transition",children:(0,i.jsx)(o,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Pipeline 执行中"}),(0,i.jsxs)("p",{className:"text-sm text-indigo-200",children:["任务 ID: ",t]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("websocket"===v&&g?"bg-green-500":"polling"===v?"bg-yellow-500":"bg-red-500")}),(0,i.jsx)("span",{className:"text-sm text-indigo-200",children:"websocket"===v&&g?"WebSocket 已连接":"polling"===v?"轮询模式":"连接中..."})]})]})})}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsx)("div",{className:"lg:col-span-1",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-6",children:"执行进度"}),(0,i.jsx)("div",{className:"space-y-4",children:m.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[T(e.id),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-semibold",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-indigo-200",children:e.description}),s.progress[e.id]&&(0,i.jsx)("div",{className:"text-xs text-indigo-300 mt-1",children:JSON.stringify(s.progress[e.id],null,2)})]})]},e.id))}),(0,i.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,i.jsx)("div",{className:"text-sm text-indigo-200 mb-2",children:"当前状态"}),(0,i.jsxs)("div",{className:"text-lg font-semibold",children:["running"===s.status&&"运行中","completed"===s.status&&"已完成","failed"===s.status&&"失败","pending"===s.status&&"等待中"]}),s.current_phase&&(0,i.jsxs)("div",{className:"text-sm text-indigo-200 mt-1",children:["当前阶段: ",s.current_phase]}),s.error&&(0,i.jsx)("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:s.error}),"completed"===s.status&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("a",{href:"/#/results/".concat(t),className:"block w-full text-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:"查看结果 →"})})]})]})}),(0,i.jsx)("div",{className:"lg:col-span-2",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"实时日志"}),(0,i.jsx)("button",{onClick:()=>p([]),className:"text-sm text-indigo-200 hover:text-white",children:"清空"})]}),(0,i.jsxs)("div",{className:"bg-gray-900 text-green-400 font-mono text-sm p-4 rounded-lg h-[600px] overflow-y-auto",children:[0===u.length?(0,i.jsx)("div",{className:"text-indigo-300",children:"等待日志输出..."}):u.map((e,t)=>(0,i.jsxs)("div",{className:"mb-1",children:[(0,i.jsxs)("span",{className:"text-indigo-300",children:["[",new Date(e.timestamp).toLocaleTimeString(),"]"]})," ",(0,i.jsx)("span",{children:e.message})]},t)),(0,i.jsx)("div",{ref:j})]})]})})]})})]}):(0,i.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[(0,i.jsx)(x.Z,{}),(0,i.jsx)(n.Z,{className:"w-8 h-8 animate-spin text-indigo-400 relative z-10"})]})}var p=s(6637),g=s(1392),f=s(9865),v=s(7480);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,a.Z)("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);function w(e){let{taskId:t}=e,[s,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)("overview");(0,r.useEffect)(()=>{t&&m()},[t]);let m=async()=>{try{let e=await h.x.getResult(t);a(e)}catch(e){console.error("Failed to load result:",e)}finally{n(!1)}};if(l)return(0,i.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[(0,i.jsx)(x.Z,{}),(0,i.jsxs)("div",{className:"text-center relative z-10",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-indigo-200",children:"加载中..."})]})]});if(!s)return(0,i.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[(0,i.jsx)(x.Z,{}),(0,i.jsxs)("div",{className:"text-center relative z-10",children:[(0,i.jsx)("p",{className:"text-indigo-200 mb-4",children:"未找到结果"}),(0,i.jsx)("a",{href:"/results",className:"text-primary-600 hover:underline",children:"返回列表"})]})]});let u=[{id:"overview",name:"概览",icon:p.Z},{id:"graph",name:"知识图谱",icon:g.Z},{id:"papers",name:"论文列表",icon:f.Z}];return(0,i.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-transparent",children:[(0,i.jsx)(x.Z,{}),(0,i.jsx)("div",{className:"relative bg-white/10 backdrop-blur-md shadow-sm border-b border-white/20",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("a",{href:"/results",className:"text-indigo-200 hover:text-white",children:(0,i.jsx)(o,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:s.topic||"分析结果"}),(0,i.jsxs)("p",{className:"text-sm text-indigo-200",children:["任务 ID: ",t]})]})]}),(0,i.jsxs)("a",{href:"/",className:"flex items-center space-x-2 px-4 py-2 text-indigo-200 hover:text-white hover:bg-white/20 rounded-lg transition",children:[(0,i.jsx)(v.Z,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"返回主页"})]})]})})}),(0,i.jsx)("div",{className:"relative bg-white/10 backdrop-blur-md border-b border-white/20",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"flex space-x-1 overflow-x-auto",children:u.map(e=>{let t=e.icon;return(0,i.jsxs)("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-3 border-b-2 transition ".concat(c===e.id?"border-primary-600 text-primary-600":"border-transparent text-indigo-200 hover:text-white"),children:[(0,i.jsx)(t,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:e.name})]},e.id)})})})}),(0,i.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===c&&(0,i.jsx)(j,{result:s,taskId:t,onTabChange:e=>{d(e)}}),"graph"===c&&(0,i.jsx)(y,{taskId:t}),"papers"===c&&(0,i.jsx)(N,{taskId:t})]})]})}function j(e){var t,s,r,a,l,n,c;let{result:d,taskId:o,onTabChange:h}=e;d.files;let x=d.summary||{},m=x.total_papers||(null===(t=d.papers)||void 0===t?void 0:t.length)||0,u=x.graph_nodes||(null===(r=d.graph_data)||void 0===r?void 0:null===(s=r.nodes)||void 0===s?void 0:s.length)||0,p=x.graph_edges||(null===(l=d.graph_data)||void 0===l?void 0:null===(a=l.edges)||void 0===a?void 0:a.length)||0,v=x.successful_analysis||(null===(c=d.papers)||void 0===c?void 0:null===(n=c.filter(e=>e.rag_analysis||e.deep_analysis))||void 0===n?void 0:n.length)||0;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-primary-600",children:m}),(0,i.jsx)("div",{className:"text-sm text-indigo-200 mt-1",children:"总论文数"})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-green-600",children:v}),(0,i.jsx)("div",{className:"text-sm text-indigo-200 mt-1",children:"成功分析"})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:u}),(0,i.jsx)("div",{className:"text-sm text-indigo-200 mt-1",children:"图谱节点"})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:p}),(0,i.jsx)("div",{className:"text-sm text-indigo-200 mt-1",children:"图谱边"})]})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"快速访问"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("button",{onClick:()=>h("graph"),className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-transparent transition text-left",children:[(0,i.jsx)(g.Z,{className:"w-6 h-6 text-primary-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:"知识图谱"}),(0,i.jsx)("div",{className:"text-sm text-indigo-200",children:"查看交互式知识图谱"})]})]}),(0,i.jsxs)("button",{onClick:()=>h("papers"),className:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-transparent transition text-left",children:[(0,i.jsx)(f.Z,{className:"w-6 h-6 text-primary-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:"论文列表"}),(0,i.jsx)("div",{className:"text-sm text-indigo-200",children:"查看所有论文详情"})]})]})]})]})]})}function y(e){let{taskId:t}=e;return(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:"知识图谱可视化"}),(0,i.jsxs)("button",{onClick:()=>{window.open(h.x.getVisualizationUrl(t),"_blank")},className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:[(0,i.jsx)(b,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"全屏查看"})]})]}),(0,i.jsx)("div",{className:"border rounded-lg overflow-hidden",style:{height:"calc(100vh - 250px)",minHeight:"600px"},children:(0,i.jsx)("iframe",{src:h.x.getVisualizationUrl(t),className:"w-full h-full border-0",title:"Knowledge Graph Visualization"})})]})}function N(e){let{taskId:t}=e,[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{o()},[t]);let o=async()=>{try{let e=await h.x.getPapers(t);a(e)}catch(e){console.error("Failed to load papers:",e)}finally{n(!1)}};return l?(0,i.jsx)("div",{className:"text-center py-12 text-indigo-300",children:"加载中..."}):(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsx)("div",{className:"lg:col-span-1",children:(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["论文列表 (",s.length,")"]}),(0,i.jsx)("div",{className:"space-y-2 max-h-[800px] overflow-y-auto",children:s.map(e=>(0,i.jsxs)("button",{onClick:()=>d(e),className:"w-full text-left p-3 rounded-lg border transition ".concat((null==c?void 0:c.id)===e.id?"border-primary-500 bg-primary-500/20 text-white":"border-white/20 hover:bg-white/10 text-white"),children:[(0,i.jsx)("div",{className:"font-semibold text-sm mb-1 line-clamp-2",children:e.title}),(0,i.jsxs)("div",{className:"text-xs text-indigo-200",children:[e.year," \xb7 ",e.cited_by_count," 引用"]})]},e.id))})]})}),(0,i.jsx)("div",{className:"lg:col-span-2",children:c?(0,i.jsx)(k,{paper:c}):(0,i.jsx)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-12 text-center text-indigo-300",children:"选择一篇论文查看详情"})})]})}function k(e){let{paper:t}=e,s=t.rag_analysis||t.deep_analysis||{};return(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-md p-6 space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-2",children:t.title}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-indigo-200",children:[(0,i.jsx)("span",{children:t.year}),(0,i.jsx)("span",{children:"\xb7"}),(0,i.jsxs)("span",{children:[t.cited_by_count," 引用"]}),t.doi&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"\xb7"}),(0,i.jsx)("a",{href:t.doi,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"DOI"})]})]}),t.authors&&(0,i.jsxs)("div",{className:"mt-2 text-sm text-indigo-200",children:["作者: ",t.authors.join(", ")]})]}),t.abstract&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"摘要"}),(0,i.jsx)("p",{className:"text-white/90",children:t.abstract})]}),s.problem&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"研究问题"}),(0,i.jsx)("p",{className:"text-white/90",children:s.problem})]}),s.method&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"方法"}),(0,i.jsx)("p",{className:"text-white/90 whitespace-pre-wrap",children:s.method})]}),s.limitation&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"局限性"}),(0,i.jsx)("p",{className:"text-white/90 whitespace-pre-wrap",children:s.limitation})]}),s.future_work&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2",children:"未来工作"}),(0,i.jsx)("p",{className:"text-white/90 whitespace-pre-wrap",children:s.future_work})]})]})}function _(){let[e,t]=(0,r.useState)(null),s=(0,r.useRef)(null);return((0,r.useEffect)(()=>{let e=()=>{let e=window.location.hash.slice(1);if(!e||"/"===e){t(null),s.current=null;return}let i=e.match(/^\/pipeline\/([^/]+)$/),r=e.match(/^\/results\/([^/]+)$/);s.current!==e&&(window.scrollTo({top:0,behavior:"smooth"}),s.current=e),i?t({path:"pipeline",id:i[1]}):r?t({path:"results",id:r[1]}):t(null)};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),e)?"pipeline"===e.path&&e.id?(0,i.jsx)(u,{taskId:e.id}):"results"===e.path&&e.id?(0,i.jsx)(w,{taskId:e.id}):null:null}},826:function(e,t,s){"use strict";s.d(t,{x:function(){return r}});class i{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),i=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!i.ok)throw Error((await i.json().catch(()=>({detail:i.statusText}))).detail||"HTTP error! status: ".concat(i.status));return i.json()}async startPipeline(e){return this.request("/api/pipeline/start",{method:"POST",body:JSON.stringify(e)})}async getTaskStatus(e){return this.request("/api/pipeline/status/".concat(e))}async listResults(){return this.request("/api/results")}async getResult(e){return this.request("/api/results/".concat(e))}async getPapers(e){return this.request("/api/results/".concat(e,"/papers"))}async getGraphData(e){return this.request("/api/results/".concat(e,"/graph"))}async getSurvey(e){return this.request("/api/results/".concat(e,"/survey"))}async getIdeas(e){return this.request("/api/results/".concat(e,"/ideas"))}getVisualizationUrl(e){return this.baseUrl?"".concat(this.baseUrl,"/api/results/").concat(e,"/visualization"):"/api/results/".concat(e,"/visualization")}getWebSocketUrl(e){if(!this.baseUrl){let t="https:"===window.location.protocol?"wss":"ws",s=window.location.host;return"".concat(t,"://").concat(s,"/api/pipeline/logs/").concat(e)}let t=this.baseUrl.startsWith("https")?"wss":"ws",s=this.baseUrl.replace(/^https?/,t);return"".concat(s,"/api/pipeline/logs/").concat(e)}constructor(e="http://47.102.99.87:8000"){this.baseUrl=e}}let r=new i},2445:function(){},6087:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},622:function(e,t,s){"use strict";var i=s(2265),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var i,a={},d=null,o=null;for(i in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(o=t.ref),t)l.call(t,i)&&!c.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:d,ref:o,props:a,_owner:n.current}}t.Fragment=a,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=9081)}),_N_E=e.O()}]);