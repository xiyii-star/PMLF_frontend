(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...u},h)=>(0,s.createElement)("svg",{ref:h,...i,width:n,height:n,stroke:r,strokeWidth:o?24*Number(l)/Number(n):l,className:["lucide",`lucide-${a(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},6637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1827:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},756:function(e,t,r){Promise.resolve().then(r.bind(r,7711))},8659:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437),i=r(2265);function a(){let e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let t;let r=e.current;if(!r)return;let s=r.getContext("2d");if(!s)return;let i=()=>{r.width=window.innerWidth,r.height=window.innerHeight};i(),window.addEventListener("resize",i);class a{update(e,t){this.x+=this.speedX,this.y+=this.speedY,this.x>e&&(this.x=0),this.x<0&&(this.x=e),this.y>t&&(this.y=0),this.y<0&&(this.y=t)}draw(){s&&(s.fillStyle="rgba(".concat(this.color,", ").concat(this.opacity,")"),s.beginPath(),s.arc(this.x,this.y,this.size,0,2*Math.PI),s.fill())}constructor(e,t){this.x=Math.random()*e,this.y=Math.random()*t,this.size=3*Math.random()+1,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.opacity=.5*Math.random()+.2;let r=["99, 102, 241","139, 92, 246","59, 130, 246","168, 85, 247"];this.color=r[Math.floor(Math.random()*r.length)]}}let n=[];for(let e=0;e<100;e++)n.push(new a(r.width,r.height));let l=e=>{if(!s)return;let t=.02*e%50;s.strokeStyle="rgba(99, 102, 241, 0.1)",s.lineWidth=1;for(let e=0;e<r.width;e+=50)s.beginPath(),s.moveTo(e,0),s.lineTo(e,r.height),s.stroke();for(let e=-50;e<r.height;e+=50)s.beginPath(),s.moveTo(0,e+t),s.lineTo(r.width,e+t),s.stroke()},o=e=>{s&&[{x:.2,y:.3,size:300,color:"99, 102, 241"},{x:.8,y:.7,size:400,color:"139, 92, 246"},{x:.5,y:.5,size:350,color:"59, 130, 246"}].forEach((t,i)=>{let a=r.width*t.x+100*Math.sin(.001*e+i),n=r.height*t.y+100*Math.cos(.001*e+i),l=s.createRadialGradient(a,n,0,a,n,t.size);l.addColorStop(0,"rgba(".concat(t.color,", 0.15)")),l.addColorStop(.5,"rgba(".concat(t.color,", 0.05)")),l.addColorStop(1,"rgba(".concat(t.color,", 0)")),s.fillStyle=l,s.fillRect(0,0,r.width,r.height)})},c=()=>{if(s)for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++){let r=n[e].x-n[t].x,i=n[e].y-n[t].y,a=Math.sqrt(r*r+i*i);a<150&&(s.strokeStyle="rgba(99, 102, 241, ".concat(.2*(1-a/150),")"),s.lineWidth=1,s.beginPath(),s.moveTo(n[e].x,n[e].y),s.lineTo(n[t].x,n[t].y),s.stroke())}},d=Date.now(),u=()=>{let e=Date.now()-d;s.fillStyle="rgba(15, 23, 42, 1)",s.fillRect(0,0,r.width,r.height),l(e),o(e),n.forEach(e=>{e.update(r.width,r.height),e.draw()}),c(),t=requestAnimationFrame(u)};return u(),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(t)}},[]),(0,s.jsx)("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"linear-gradient(to bottom, #0f172a, #1e1b4b)"}})}},7711:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),i=r(2265),a=r(1827),n=r(6637),l=r(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),c=(0,l.Z)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);var d=r(6264),u=r(826),h=r(8659);function p(){let[e,t]=(0,i.useState)(""),[r,l]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[x,y]=(0,i.useState)({seed_count:5,citations_per_seed:3,references_per_seed:3,skip_pdf:!1,quick:!1,use_deep_paper:!0,use_snowball:!1}),[b,f]=(0,i.useState)({model:"gpt-4o-mini",api_key:"",base_url:"https://api.openai.com/v1"}),g=async t=>{if(t.preventDefault(),!e.trim()){m("请输入研究主题");return}if(!b.api_key.trim()){m("请输入 OpenAI API Key");return}l(!0),m(null);try{let t={topic:e.trim(),skip_pdf:x.skip_pdf,quick:x.quick,use_llm:!0,use_deep_paper:x.use_deep_paper,use_snowball:x.use_snowball,max_papers:void 0,config_overrides:{max_papers:x.seed_count,max_citations:x.citations_per_seed,max_references:x.references_per_seed,max_pdf_downloads:x.seed_count*(1+x.citations_per_seed+x.references_per_seed),llm_model:b.model,llm_api_key:b.api_key,llm_base_url:b.base_url}},r=await u.x.startPipeline(t);window.location.hash="#/pipeline/".concat(r.task_id)}catch(e){m(e.message||"启动分析失败"),l(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,s.jsx)(h.Z,{}),(0,s.jsx)("div",{className:"relative max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl shadow-2xl p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-white",children:"新建分析任务"}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-white mb-2",children:"研究主题 *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-300 w-5 h-5"}),(0,s.jsx)("input",{id:"topic",type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"例如: transformer, computer vision, natural language processing",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:ring-2 focus:ring-indigo-400 focus:bg-white/20 transition",disabled:r})]})]}),(0,s.jsxs)("div",{className:"border-t border-white/20 pt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4 text-white",children:"检索参数"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 text-blue-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-white",children:"种子论文数"})]}),(0,s.jsx)("input",{type:"number",min:"1",max:"20",value:x.seed_count,onChange:e=>y({...x,seed_count:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-white/20 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"初始搜索获取的论文数量"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(o,{className:"w-4 h-4 text-green-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-white",children:"引用扩展 (Citations)"})]}),(0,s.jsx)("input",{type:"number",min:"0",max:"10",value:x.citations_per_seed,onChange:e=>y({...x,citations_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-white/20 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"每篇论文向下追踪的数量"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(c,{className:"w-4 h-4 text-purple-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-white",children:"参考回溯 (Refs)"})]}),(0,s.jsx)("input",{type:"number",min:"0",max:"10",value:x.references_per_seed,onChange:e=>y({...x,references_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-white/20 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"每篇论文向上追溯的数量"})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"LLM 配置"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"model",className:"block text-sm font-medium text-white mb-2",children:"模型 (Model) *"}),(0,s.jsx)("input",{id:"model",type:"text",value:b.model,onChange:e=>f({...b,model:e.target.value}),placeholder:"例如: gpt-4o-mini, gpt-4o, gpt-3.5-turbo",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"OpenAI 模型名称"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"api_key",className:"block text-sm font-medium text-white mb-2",children:"API Key *"}),(0,s.jsx)("input",{id:"api_key",type:"password",value:b.api_key,onChange:e=>f({...b,api_key:e.target.value}),placeholder:"sk-...",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"OpenAI API 密钥"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"base_url",className:"block text-sm font-medium text-white mb-2",children:"Base URL"}),(0,s.jsx)("input",{id:"base_url",type:"text",value:b.base_url,onChange:e=>f({...b,base_url:e.target.value}),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"API 基础地址（使用代理或兼容服务时修改）"})]})]})]}),p&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),(0,s.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"flex-1 px-6 py-3 border border-white/20 rounded-lg hover:bg-gray-50 transition",disabled:r,children:"取消"}),(0,s.jsx)("button",{type:"submit",disabled:r||!e.trim(),className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"启动中..."]}):"开始分析"})]})]})]})})]})}},826:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({detail:s.statusText}))).detail||"HTTP error! status: ".concat(s.status));return s.json()}async startPipeline(e){return this.request("/api/pipeline/start",{method:"POST",body:JSON.stringify(e)})}async getTaskStatus(e){return this.request("/api/pipeline/status/".concat(e))}async listResults(){return this.request("/api/results")}async getResult(e){return this.request("/api/results/".concat(e))}async getPapers(e){return this.request("/api/results/".concat(e,"/papers"))}async getGraphData(e){return this.request("/api/results/".concat(e,"/graph"))}async getSurvey(e){return this.request("/api/results/".concat(e,"/survey"))}async getIdeas(e){return this.request("/api/results/".concat(e,"/ideas"))}getVisualizationUrl(e){return this.baseUrl?"".concat(this.baseUrl,"/api/results/").concat(e,"/visualization"):"/api/results/".concat(e,"/visualization")}getWebSocketUrl(e){if(!this.baseUrl){let t="https:"===window.location.protocol?"wss":"ws",r=window.location.host;return"".concat(t,"://").concat(r,"/api/pipeline/logs/").concat(e)}let t=this.baseUrl.startsWith("https")?"wss":"ws",r=this.baseUrl.replace(/^https?/,t);return"".concat(r,"/api/pipeline/logs/").concat(e)}constructor(e="http://47.102.99.87:8000"){this.baseUrl=e}}let i=new s},622:function(e,t,r){"use strict";var s=r(2265),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,a={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,s)&&!o.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=756)}),_N_E=e.O()}]);