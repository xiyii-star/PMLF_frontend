(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...u},p)=>(0,s.createElement)("svg",{ref:p,...a,width:i,height:i,stroke:r,strokeWidth:o?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},6637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1827:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},756:function(e,t,r){Promise.resolve().then(r.bind(r,7711))},7711:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(2265),n=r(1827),i=r(6637),l=r(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),c=(0,l.Z)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);var d=r(6264),u=r(826);function p(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[x,y]=(0,a.useState)({seed_count:5,citations_per_seed:3,references_per_seed:3,skip_pdf:!1,quick:!1,use_deep_paper:!0,use_snowball:!1}),[h,g]=(0,a.useState)({model:"gpt-4o-mini",api_key:"",base_url:"https://api.openai.com/v1"}),b=async t=>{if(t.preventDefault(),!e.trim()){m("请输入研究主题");return}if(!h.api_key.trim()){m("请输入 OpenAI API Key");return}l(!0),m(null);try{let t={topic:e.trim(),skip_pdf:x.skip_pdf,quick:x.quick,use_llm:!0,use_deep_paper:x.use_deep_paper,use_snowball:x.use_snowball,max_papers:void 0,config_overrides:{max_papers:x.seed_count,max_citations:x.citations_per_seed,max_references:x.references_per_seed,max_pdf_downloads:x.seed_count*(1+x.citations_per_seed+x.references_per_seed),llm_model:h.model,llm_api_key:h.api_key,llm_base_url:h.base_url}},r=await u.x.startPipeline(t);window.location.hash="#/pipeline/".concat(r.task_id)}catch(e){m(e.message||"启动分析失败"),l(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,s.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"新建分析任务"}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700 mb-2",children:"研究主题 *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{id:"topic",type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"例如: transformer, computer vision, natural language processing",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"检索参数"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-blue-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"种子论文数"})]}),(0,s.jsx)("input",{type:"number",min:"1",max:"20",value:x.seed_count,onChange:e=>y({...x,seed_count:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"初始搜索获取的论文数量"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(o,{className:"w-4 h-4 text-green-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"引用扩展 (Citations)"})]}),(0,s.jsx)("input",{type:"number",min:"0",max:"10",value:x.citations_per_seed,onChange:e=>y({...x,citations_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"每篇论文向下追踪的数量"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(c,{className:"w-4 h-4 text-purple-600 mr-2"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"参考回溯 (Refs)"})]}),(0,s.jsx)("input",{type:"number",min:"0",max:"10",value:x.references_per_seed,onChange:e=>y({...x,references_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"每篇论文向上追溯的数量"})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"LLM 配置"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 mb-2",children:"模型 (Model) *"}),(0,s.jsx)("input",{id:"model",type:"text",value:h.model,onChange:e=>g({...h,model:e.target.value}),placeholder:"例如: gpt-4o-mini, gpt-4o, gpt-3.5-turbo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"OpenAI 模型名称"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"api_key",className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key *"}),(0,s.jsx)("input",{id:"api_key",type:"password",value:h.api_key,onChange:e=>g({...h,api_key:e.target.value}),placeholder:"sk-...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"OpenAI API 密钥"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"base_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Base URL"}),(0,s.jsx)("input",{id:"base_url",type:"text",value:h.base_url,onChange:e=>g({...h,base_url:e.target.value}),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"API 基础地址（使用代理或兼容服务时修改）"})]})]})]}),p&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),(0,s.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition",disabled:r,children:"取消"}),(0,s.jsx)("button",{type:"submit",disabled:r||!e.trim(),className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"启动中..."]}):"开始分析"})]})]})]})})})}},826:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({detail:s.statusText}))).detail||"HTTP error! status: ".concat(s.status));return s.json()}async startPipeline(e){return this.request("/api/pipeline/start",{method:"POST",body:JSON.stringify(e)})}async getTaskStatus(e){return this.request("/api/pipeline/status/".concat(e))}async listResults(){return this.request("/api/results")}async getResult(e){return this.request("/api/results/".concat(e))}async getPapers(e){return this.request("/api/results/".concat(e,"/papers"))}async getGraphData(e){return this.request("/api/results/".concat(e,"/graph"))}async getSurvey(e){return this.request("/api/results/".concat(e,"/survey"))}async getIdeas(e){return this.request("/api/results/".concat(e,"/ideas"))}getVisualizationUrl(e){return this.baseUrl?"".concat(this.baseUrl,"/api/results/").concat(e,"/visualization"):"/api/results/".concat(e,"/visualization")}getWebSocketUrl(e){if(!this.baseUrl){let t="https:"===window.location.protocol?"wss":"ws",r=window.location.host;return"".concat(t,"://").concat(r,"/api/pipeline/logs/").concat(e)}let t=this.baseUrl.startsWith("https")?"wss":"ws",r=this.baseUrl.replace(/^https?/,t);return"".concat(r,"/api/pipeline/logs/").concat(e)}constructor(e="http://47.102.99.87:8000"){this.baseUrl=e}}let a=new s},622:function(e,t,r){"use strict";var s=r(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,n={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!o.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=756)}),_N_E=e.O()}]);