(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...h},u)=>(0,r.createElement)("svg",{ref:u,...i,width:n,height:n,stroke:s,strokeWidth:o?24*Number(l)/Number(n):l,className:["lucide",`lucide-${a(e)}`,c].join(" "),...h},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s}},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},756:function(e,t,s){Promise.resolve().then(s.bind(s,7711))},8659:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(7437),i=s(2265);function a(){let e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let t;let s=e.current;if(!s)return;let r=s.getContext("2d");if(!r)return;let i=()=>{s.width=window.innerWidth,s.height=window.innerHeight};i(),window.addEventListener("resize",i);class a{update(e,t){this.x+=this.speedX,this.y+=this.speedY,this.x>e&&(this.x=0),this.x<0&&(this.x=e),this.y>t&&(this.y=0),this.y<0&&(this.y=t)}draw(){r&&(r.fillStyle="rgba(".concat(this.color,", ").concat(this.opacity,")"),r.beginPath(),r.arc(this.x,this.y,this.size,0,2*Math.PI),r.fill())}constructor(e,t){this.x=Math.random()*e,this.y=Math.random()*t,this.size=3*Math.random()+1,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.opacity=.5*Math.random()+.2;let s=["99, 102, 241","139, 92, 246","59, 130, 246","168, 85, 247"];this.color=s[Math.floor(Math.random()*s.length)]}}let n=[];for(let e=0;e<100;e++)n.push(new a(s.width,s.height));let l=e=>{if(!r)return;let t=.02*e%50;r.strokeStyle="rgba(99, 102, 241, 0.1)",r.lineWidth=1;for(let e=0;e<s.width;e+=50)r.beginPath(),r.moveTo(e,0),r.lineTo(e,s.height),r.stroke();for(let e=-50;e<s.height;e+=50)r.beginPath(),r.moveTo(0,e+t),r.lineTo(s.width,e+t),r.stroke()},o=e=>{r&&[{x:.2,y:.3,size:300,color:"99, 102, 241"},{x:.8,y:.7,size:400,color:"139, 92, 246"},{x:.5,y:.5,size:350,color:"59, 130, 246"}].forEach((t,i)=>{let a=s.width*t.x+100*Math.sin(.001*e+i),n=s.height*t.y+100*Math.cos(.001*e+i),l=r.createRadialGradient(a,n,0,a,n,t.size);l.addColorStop(0,"rgba(".concat(t.color,", 0.15)")),l.addColorStop(.5,"rgba(".concat(t.color,", 0.05)")),l.addColorStop(1,"rgba(".concat(t.color,", 0)")),r.fillStyle=l,r.fillRect(0,0,s.width,s.height)})},c=()=>{if(r)for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++){let s=n[e].x-n[t].x,i=n[e].y-n[t].y,a=Math.sqrt(s*s+i*i);a<150&&(r.strokeStyle="rgba(99, 102, 241, ".concat(.2*(1-a/150),")"),r.lineWidth=1,r.beginPath(),r.moveTo(n[e].x,n[e].y),r.lineTo(n[t].x,n[t].y),r.stroke())}},d=Date.now(),h=()=>{let e=Date.now()-d;r.fillStyle="rgba(15, 23, 42, 1)",r.fillRect(0,0,s.width,s.height),l(e),o(e),n.forEach(e=>{e.update(s.width,s.height),e.draw()}),c(),t=requestAnimationFrame(h)};return h(),()=>{window.removeEventListener("resize",i),cancelAnimationFrame(t)}},[]),(0,r.jsx)("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"linear-gradient(to bottom, #0f172a, #1e1b4b)"}})}},7711:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(7437),i=s(2265),a=s(1827),n=s(6637),l=s(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),c=(0,l.Z)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);var d=s(6264),h=s(826),u=s(8659);function p(){let[e,t]=(0,i.useState)(""),[s,l]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[x,b]=(0,i.useState)({seed_count:5,citations_per_seed:3,references_per_seed:3,skip_pdf:!1,quick:!1,use_deep_paper:!0,use_snowball:!1}),[f,y]=(0,i.useState)({model:"gpt-4o-mini",api_key:"",base_url:"https://api.openai.com/v1"}),g=async t=>{if(t.preventDefault(),!e.trim()){m("请输入研究主题");return}if(!f.api_key.trim()){m("请输入 OpenAI API Key");return}l(!0),m(null);try{let t={topic:e.trim(),skip_pdf:x.skip_pdf,quick:x.quick,use_llm:!0,use_deep_paper:x.use_deep_paper,use_snowball:x.use_snowball,max_papers:void 0,config_overrides:{max_papers:x.seed_count,max_citations:x.citations_per_seed,max_references:x.references_per_seed,max_pdf_downloads:x.seed_count*(1+x.citations_per_seed+x.references_per_seed),llm_model:f.model,llm_api_key:f.api_key,llm_base_url:f.base_url}},s=await h.x.startPipeline(t);window.location.hash="#/pipeline/".concat(s.task_id)}catch(e){m(e.message||"启动分析失败"),l(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)("div",{className:"relative max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl shadow-2xl p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-white",children:"新建分析任务"}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-white mb-2",children:"研究主题 *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-300 w-5 h-5"}),(0,r.jsx)("input",{id:"topic",type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"例如: transformer, computer vision, natural language processing",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:ring-2 focus:ring-indigo-400 focus:bg-white/20 transition",disabled:s})]})]}),(0,r.jsxs)("div",{className:"border-t border-white/20 pt-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-white",children:"检索参数"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white/20 p-4 rounded-lg border border-white/30",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 text-blue-600 mr-2"}),(0,r.jsx)("label",{className:"block text-sm font-medium text-white",children:"种子论文数"})]}),(0,r.jsx)("input",{type:"number",min:"1",max:"20",value:x.seed_count,onChange:e=>b({...x,seed_count:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white focus:ring-2 focus:ring-primary-500 focus:bg-white/20",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"初始搜索获取的论文数量"})]}),(0,r.jsxs)("div",{className:"bg-white/20 p-4 rounded-lg border border-white/30",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(o,{className:"w-4 h-4 text-green-600 mr-2"}),(0,r.jsx)("label",{className:"block text-sm font-medium text-white",children:"引用扩展 (Citations)"})]}),(0,r.jsx)("input",{type:"number",min:"0",max:"10",value:x.citations_per_seed,onChange:e=>b({...x,citations_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white focus:ring-2 focus:ring-primary-500 focus:bg-white/20",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"每篇论文向下追踪的数量"})]}),(0,r.jsxs)("div",{className:"bg-white/20 p-4 rounded-lg border border-white/30",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(c,{className:"w-4 h-4 text-purple-600 mr-2"}),(0,r.jsx)("label",{className:"block text-sm font-medium text-white",children:"参考回溯 (Refs)"})]}),(0,r.jsx)("input",{type:"number",min:"0",max:"10",value:x.references_per_seed,onChange:e=>b({...x,references_per_seed:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white focus:ring-2 focus:ring-primary-500 focus:bg-white/20",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"每篇论文向上追溯的数量"})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"LLM 配置"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"model",className:"block text-sm font-medium text-white mb-2",children:"模型 (Model) *"}),(0,r.jsx)("input",{id:"model",type:"text",value:f.model,onChange:e=>y({...f,model:e.target.value}),placeholder:"例如: gpt-4o-mini, gpt-4o, gpt-3.5-turbo",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"OpenAI 模型名称"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"api_key",className:"block text-sm font-medium text-white mb-2",children:"API Key *"}),(0,r.jsx)("input",{id:"api_key",type:"password",value:f.api_key,onChange:e=>y({...f,api_key:e.target.value}),placeholder:"sk-...",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"OpenAI API 密钥"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"base_url",className:"block text-sm font-medium text-white mb-2",children:"Base URL"}),(0,r.jsx)("input",{id:"base_url",type:"text",value:f.base_url,onChange:e=>y({...f,base_url:e.target.value}),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:s}),(0,r.jsx)("p",{className:"text-xs text-indigo-300 mt-1",children:"API 基础地址（使用代理或兼容服务时修改）"})]})]})]}),p&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"flex-1 px-6 py-3 border border-white/20 rounded-lg hover:bg-white/20 transition",disabled:s,children:"取消"}),(0,r.jsx)("button",{type:"submit",disabled:s||!e.trim(),className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"启动中..."]}):"开始分析"})]})]})]})})]})}},826:function(e,t,s){"use strict";s.d(t,{x:function(){return i}});class r{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),r=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({detail:r.statusText}))).detail||"HTTP error! status: ".concat(r.status));return r.json()}async startPipeline(e){return this.request("/api/pipeline/start",{method:"POST",body:JSON.stringify(e)})}async getTaskStatus(e){return this.request("/api/pipeline/status/".concat(e))}async listResults(){return this.request("/api/results")}async getResult(e){return this.request("/api/results/".concat(e))}async getPapers(e){return this.request("/api/results/".concat(e,"/papers"))}async getGraphData(e){return this.request("/api/results/".concat(e,"/graph"))}async getSurvey(e){return this.request("/api/results/".concat(e,"/survey"))}async getIdeas(e){return this.request("/api/results/".concat(e,"/ideas"))}getVisualizationUrl(e){return this.baseUrl?"".concat(this.baseUrl,"/api/results/").concat(e,"/visualization"):"/api/results/".concat(e,"/visualization")}getWebSocketUrl(e){if(!this.baseUrl){let t="https:"===window.location.protocol?"wss":"ws",s=window.location.host;return"".concat(t,"://").concat(s,"/api/pipeline/logs/").concat(e)}let t=this.baseUrl.startsWith("https")?"wss":"ws",s=this.baseUrl.replace(/^https?/,t);return"".concat(s,"/api/pipeline/logs/").concat(e)}constructor(e="http://47.102.99.87:8000"){this.baseUrl=e}}let i=new r},622:function(e,t,s){"use strict";var r=s(2265),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,a={},c=null,d=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,r)&&!o.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=756)}),_N_E=e.O()}]);